<script src="./helper.js"></script>
<script>
'use strict';

// Intercept successful calls and return mocked value.
initialize_sms_tests()
  .then(smsTest => {
    smsTest.setReturnValues([{status: Status.kSuccess, message: "hello"}]);
  });

window.onload = function() {
  navigator.sms.receive()
   .then(sms => {
     window.parent.postMessage({result: "Pass", sms: sms.content}, '*');
   })
   .catch(error => {
     window.parent.postMessage({result: "Fail", errorType: error.name}, '*');
   });
}

</script>
